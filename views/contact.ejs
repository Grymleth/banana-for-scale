<html lang="en">
    <%- include ('./partials/head') %>
<body>
    <%- include ('./partials/header') %>

    <!-- Content -->
    <div class="contact content">
        <div>
            <form>
                <h3>Contact</h3>
                <label for="name">Subject</label>
                <input type="text" id="subject" name="subject" placeholder="Subject" required>
                <label for="email">Email</label>
                <input type="text" id="email" name="email" placeholder="name@example.com"required> 
                <label for="depth">Message</label>
                <textarea name="message" id="message" cols="30" rows="10" placeholder="Enter your message here"></textarea>
                <input type="submit" value="Submit">
            </form>
        </div>
    </div>

    <%- include('./partials/footer.ejs') %>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $('form').on('submit', (e) => {
            console.log('wtf');
            e.preventDefault();
            
            const data = {
                email: $('#email').val().trim(),
                subject: $('#subject').val().trim(),
                message: $('#message').val().trim()
            };

            $.post('/contact', data, function(){
                console.log('data send and receieved');
                const form = document.querySelector('form');
                alert('Message has been sent');
                form.reset();
            });
        });
    </script>
</body>
</html>